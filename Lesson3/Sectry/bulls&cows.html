<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>bulls&cows</title>
</head>
<body>
	<script>
		'use strict';

		/**
		 * [getRandomNumber Функция генерирует массив из случайных, неповторяющихся цифр]
		 * @return {[string]} [возвращает массив из цифр в виде строк]
		 */
		function getRandomNumber() {
			let numArr = [];

			while (numArr.length < 4) {
				let num = String(parseInt(Math.random()*10));
				if (numArr.length == 0) {
					numArr.push(num);
				}

				if (!(numArr.includes(num))) {
					numArr.push(num);
				}
			}
			return numArr;
		}

		function game() {
			let number = getRandomNumber();

			while (true) {
				let answer = prompt(`Игра быки и коровы введите четыре(4) цифры!`).split('');

				let corrAnswer = answer.filter((item, idx) => {
					if (idx === answer.indexOf(item)) {
						return ' ';
					}
				});

				let cowsCount = 0;
				let bullsCount = 0;

				if (corrAnswer.toString() === number.toString()) {
					alert(`Вы победили!`);
					break;
				}

				for (let i = 0; i < number.length; i++) {
					for (let j = 0; j < corrAnswer.length; j++) {
						if (number[i] === corrAnswer[j]) {
							cowsCount++
						}

						if ((number[i] === corrAnswer[j]) && (i === j)) {
							bullsCount++;
						}
					}
				}
				cowsCount = cowsCount - bullsCount;
				alert(`Коровы: ${cowsCount}\nБыки: ${bullsCount}`);
			}
			
		}

		game();


	</script>
</body>
</html>